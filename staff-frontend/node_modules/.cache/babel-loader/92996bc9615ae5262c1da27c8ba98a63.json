{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/walee/Documents/Projects/Staff-mgmt/staff-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/walee/Documents/Projects/Staff-mgmt/staff-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/walee/Documents/Projects/Staff-mgmt/staff-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';// import { useAuthContext } from './useAuthContext'\nimport{useHistory}from'react-router-dom';export function useSignup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];// const { dispatch } = useAuthContext()\nvar history=useHistory();function signup(_x,_x2){return _signup.apply(this,arguments);}function _signup(){_signup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.next=4;return fetch('http://localhost:5000/api/user/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:json=_context.sent;if(!response.ok){setIsLoading(false);setError(json.error);}if(response.ok){localStorage.setItem('user',JSON.stringify(json));// dispatch({type: 'LOGIN', payload: json})\nsetIsLoading(false);history.push('/view');}case 10:case\"end\":return _context.stop();}}},_callee);}));return _signup.apply(this,arguments);}return{signup:signup,isLoading:isLoading,error:error};}","map":{"version":3,"names":["useState","useHistory","useSignup","error","setError","isLoading","setIsLoading","history","signup","email","password","fetch","method","headers","body","JSON","stringify","response","json","ok","localStorage","setItem","push"],"sources":["C:/Users/walee/Documents/Projects/Staff-mgmt/staff-frontend/src/hooks/useSignup.js"],"sourcesContent":["import { useState } from 'react'\r\n// import { useAuthContext } from './useAuthContext'\r\nimport { useHistory } from 'react-router-dom';\r\nexport function useSignup()  {\r\n  const [error, setError] = useState(null)\r\n  const [isLoading, setIsLoading] = useState(null)\r\n  // const { dispatch } = useAuthContext()\r\n  const history = useHistory();\r\n\r\n   async function signup(email, password)  {\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    const response = await fetch('http://localhost:5000/api/user/signup', {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n    const json = await response.json()\r\n\r\n    if (!response.ok) {\r\n      setIsLoading(false)\r\n      setError(json.error)\r\n    }\r\n    if (response.ok) {\r\n      \r\n      localStorage.setItem('user', JSON.stringify(json))\r\n\r\n      \r\n      // dispatch({type: 'LOGIN', payload: json})\r\n\r\n      setIsLoading(false)\r\n      \r\n      history.push('/view')\r\n      \r\n    }\r\n  }\r\n\r\n  return { signup, isLoading, error }\r\n}"],"mappings":"mcAAA,OAASA,QAAT,KAAyB,OAAzB,CACA;AACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAO,SAASC,UAAT,EAAsB,CAC3B,cAA0BF,QAAQ,CAAC,IAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,eAAkCJ,QAAQ,CAAC,IAAD,CAA1C,yCAAOK,SAAP,eAAkBC,YAAlB,eACA;AACA,GAAMC,QAAO,CAAGN,UAAU,EAA1B,CAJ2B,QAMXO,OANW,oIAM1B,iBAAsBC,KAAtB,CAA6BC,QAA7B,sIACCJ,YAAY,CAAC,IAAD,CAAZ,CACAF,QAAQ,CAAC,IAAD,CAAR,CAFD,sBAIwBO,MAAK,CAAC,uCAAD,CAA0C,CACpEC,MAAM,CAAE,MAD4D,CAEpEC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAF2D,CAGpEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAH8D,CAA1C,CAJ7B,QAIOO,QAJP,qCASoBA,SAAQ,CAACC,IAAT,EATpB,QASOA,IATP,eAWC,GAAI,CAACD,QAAQ,CAACE,EAAd,CAAkB,CAChBb,YAAY,CAAC,KAAD,CAAZ,CACAF,QAAQ,CAACc,IAAI,CAACf,KAAN,CAAR,CACD,CACD,GAAIc,QAAQ,CAACE,EAAb,CAAiB,CAEfC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BN,IAAI,CAACC,SAAL,CAAeE,IAAf,CAA7B,EAGA;AAEAZ,YAAY,CAAC,KAAD,CAAZ,CAEAC,OAAO,CAACe,IAAR,CAAa,OAAb,EAED,CA1BF,uDAN0B,yCAmC3B,MAAO,CAAEd,MAAM,CAANA,MAAF,CAAUH,SAAS,CAATA,SAAV,CAAqBF,KAAK,CAALA,KAArB,CAAP,CACD"},"metadata":{},"sourceType":"module"}